{
  "version": 4,
  "terraform_version": "1.0.9",
  "serial": 147,
  "lineage": "1b860d41-c8d0-766f-aecf-2ef92e2f7b88",
  "outputs": {
    "workers_servers_ips": {
      "value": {
        "worker-0": "49.12.238.231"
      },
      "type": [
        "object",
        {
          "worker-0": "string"
        }
      ]
    },
    "workers_servers_status": {
      "value": {
        "worker-0": "running"
      },
      "type": [
        "object",
        {
          "worker-0": "string"
        }
      ]
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "86cabc660dba629bbcce200a31f0d6f41c47174e80446f2eef39fb7cbc0900a3",
            "rendered": "#cloud-config\nusers:\n  - name: devops\n    groups: users, admin\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    shell: /bin/bash\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC7E75JwR78Zj0AGf0Hk9VqAs9e37+yOPNNssEdbHM3Uh15BvoHqDTfr8zRO3OsiWBeFmIR0KH8qdwraj1DGGsvnDAwDbi1mQH6V4e/9U269oBFJWKiLAxLUStyRGwK2EZOJvKjT6coic0Hck6I+LUp8QQRMZT8B4UJVk6N4nq0bg0v23dGUm6ULfrMHdJlLGde8Eb+ln/CWjOQXP/4G2UAOGi5PLlftqqJnqsGDS+MfCmNofifjq6NnF65i9JWkrfEVye3Ny3jwEEkBOaojtv9atjE+ExCsmH2BbJYAjEKNjamQwJkJ4iteGZEm88JCOkzRDr0ZEbgac4l7snbRTWt+2rz0UFnzYj00iAnrvQRh1OGgopspSZr7VJEvqdajO24PB7EuNVhG/y4mCpQ7ui1zFLF7X8s1/l6BXuCquiMOtldas5WzgAi1BiyOY3dj6iSEiR182asOsv/VRmmoQGIWQWU1qDQ7fvNCr+qKqSllslkJDb1MMgUumRiCKUI2VrdHt2tKuoHIKxR3zrHAhRe7gDCokPACFUcqOwL6wgFhtqtKJ1EzVl8yQBngnmaPDH/VGUHFhWU6i13hW76B1I/hhdI670l0YyJlsscxpBzWtHlgqTRzNX0l9LpWZhBXkKMluAH0JVy1fOfOs/zHJwqEkCmdDQyuuzN0z/B4PCCGQ== renanssilva@MacBook-Pro.local\n#package_update: true\n#package_upgrade: true\n#packages:\n  #- git\n  #- vim\n  #- neovim\n  #- gcc\n  #- make\n  #- cmake\n  #- libsdl2-dev\n  #- libsdl2-ttf-dev\nruncmd:\n  - cd /home/devops\n  - touch $HOME/I_WAS_HERE\n\n    # Pyenv setup\n  - git clone https://github.com/pyenv/pyenv.git .pyenv\n  - chown -R devops:devops .pyenv\n\n  #- echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e .bashrc\n  #- echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e .bashrc\n  #- echo 'if command -v pyenv 1\u003e/dev/null 2\u003e\u00261; then eval \"$(pyenv init --path)\"; fi' \u003e\u003e .bashrc\n  #- echo 'if command -v pyenv 1\u003e/dev/null 2\u003e\u00261; then eval \"$(pyenv init -)\"; fi' \u003e\u003e .bashrc\n  #- export PYENV_ROOT=\"$HOME/.pyenv\"\n  #- export PATH=\"$PYENV_ROOT/bin:$PATH\"\n  #- eval \"$(pyenv init --path)\"\n  #- eval \"$(pyenv init -)\"\n\n  - echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e .bashrc\n  - echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e .bashrc\n  - echo 'eval \"$(pyenv init --path)\"' \u003e\u003e .bashrc\n  - echo 'eval \"$(pyenv init -)\"' \u003e\u003e .bashrc\n\n    # Get gabate\n  - git clone 'https://github.com/h3nnn4n/gabate'\n  - chown -R devops:devops gabate\n  - cd gabate\n\n    ## Gabate deps\n  #- git submodule update --init --recursive\n  #- cd deps/pcg-c/ \u0026\u0026 make -j 4 \u0026\u0026 cd -\n  #- cd deps/cJSON/ \u0026\u0026 mkdir build \u0026\u0026 cd build \u0026\u0026 cmake .. \u0026\u0026 make -j 4 \u0026\u0026 cd ../../../\n\n    ## Build gabate\n  #- make -j 4\n\n    # Worker setup\n  - cd worker\n\n  - echo \"#/bin/bash\" \u003e setup_python\n  - echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e setup_python\n  - echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e setup_python\n  - echo 'eval \"$(pyenv init --path)\"' \u003e\u003e setup_python\n  - echo 'eval \"$(pyenv init -)\"' \u003e\u003e setup_python\n  - echo \"pyenv install 3.10.0\" \u003e\u003e setup_python\n  - echo \"python -m pip install poetry\" \u003e\u003e setup_python\n  - echo \"pyenv rehash\" \u003e\u003e setup_python\n  - echo \"poetry install\" \u003e\u003e setup_python\n  - echo \"poetry run celery -A tasks worker --loglevel=INFO --detach\" \u003e\u003e setup_python\n  - chown devops:devops setup_python\n  - su devops - ./setup_python\n  - su devops -l -c \"./setup_python\"\n  - echo $PYENV_ROOT\n  - echo $PATH\n",
            "template": "#cloud-config\nusers:\n  - name: devops\n    groups: users, admin\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    shell: /bin/bash\n    ssh_authorized_keys:\n      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC7E75JwR78Zj0AGf0Hk9VqAs9e37+yOPNNssEdbHM3Uh15BvoHqDTfr8zRO3OsiWBeFmIR0KH8qdwraj1DGGsvnDAwDbi1mQH6V4e/9U269oBFJWKiLAxLUStyRGwK2EZOJvKjT6coic0Hck6I+LUp8QQRMZT8B4UJVk6N4nq0bg0v23dGUm6ULfrMHdJlLGde8Eb+ln/CWjOQXP/4G2UAOGi5PLlftqqJnqsGDS+MfCmNofifjq6NnF65i9JWkrfEVye3Ny3jwEEkBOaojtv9atjE+ExCsmH2BbJYAjEKNjamQwJkJ4iteGZEm88JCOkzRDr0ZEbgac4l7snbRTWt+2rz0UFnzYj00iAnrvQRh1OGgopspSZr7VJEvqdajO24PB7EuNVhG/y4mCpQ7ui1zFLF7X8s1/l6BXuCquiMOtldas5WzgAi1BiyOY3dj6iSEiR182asOsv/VRmmoQGIWQWU1qDQ7fvNCr+qKqSllslkJDb1MMgUumRiCKUI2VrdHt2tKuoHIKxR3zrHAhRe7gDCokPACFUcqOwL6wgFhtqtKJ1EzVl8yQBngnmaPDH/VGUHFhWU6i13hW76B1I/hhdI670l0YyJlsscxpBzWtHlgqTRzNX0l9LpWZhBXkKMluAH0JVy1fOfOs/zHJwqEkCmdDQyuuzN0z/B4PCCGQ== renanssilva@MacBook-Pro.local\n#package_update: true\n#package_upgrade: true\n#packages:\n  #- git\n  #- vim\n  #- neovim\n  #- gcc\n  #- make\n  #- cmake\n  #- libsdl2-dev\n  #- libsdl2-ttf-dev\nruncmd:\n  - cd /home/devops\n  - touch $HOME/I_WAS_HERE\n\n    # Pyenv setup\n  - git clone https://github.com/pyenv/pyenv.git .pyenv\n  - chown -R devops:devops .pyenv\n\n  #- echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e .bashrc\n  #- echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e .bashrc\n  #- echo 'if command -v pyenv 1\u003e/dev/null 2\u003e\u00261; then eval \"$(pyenv init --path)\"; fi' \u003e\u003e .bashrc\n  #- echo 'if command -v pyenv 1\u003e/dev/null 2\u003e\u00261; then eval \"$(pyenv init -)\"; fi' \u003e\u003e .bashrc\n  #- export PYENV_ROOT=\"$HOME/.pyenv\"\n  #- export PATH=\"$PYENV_ROOT/bin:$PATH\"\n  #- eval \"$(pyenv init --path)\"\n  #- eval \"$(pyenv init -)\"\n\n  - echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e .bashrc\n  - echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e .bashrc\n  - echo 'eval \"$(pyenv init --path)\"' \u003e\u003e .bashrc\n  - echo 'eval \"$(pyenv init -)\"' \u003e\u003e .bashrc\n\n    # Get gabate\n  - git clone 'https://github.com/h3nnn4n/gabate'\n  - chown -R devops:devops gabate\n  - cd gabate\n\n    ## Gabate deps\n  #- git submodule update --init --recursive\n  #- cd deps/pcg-c/ \u0026\u0026 make -j 4 \u0026\u0026 cd -\n  #- cd deps/cJSON/ \u0026\u0026 mkdir build \u0026\u0026 cd build \u0026\u0026 cmake .. \u0026\u0026 make -j 4 \u0026\u0026 cd ../../../\n\n    ## Build gabate\n  #- make -j 4\n\n    # Worker setup\n  - cd worker\n\n  - echo \"#/bin/bash\" \u003e setup_python\n  - echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' \u003e\u003e setup_python\n  - echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' \u003e\u003e setup_python\n  - echo 'eval \"$(pyenv init --path)\"' \u003e\u003e setup_python\n  - echo 'eval \"$(pyenv init -)\"' \u003e\u003e setup_python\n  - echo \"pyenv install 3.10.0\" \u003e\u003e setup_python\n  - echo \"python -m pip install poetry\" \u003e\u003e setup_python\n  - echo \"pyenv rehash\" \u003e\u003e setup_python\n  - echo \"poetry install\" \u003e\u003e setup_python\n  - echo \"poetry run celery -A tasks worker --loglevel=INFO --detach\" \u003e\u003e setup_python\n  - chown devops:devops setup_python\n  - su devops - ./setup_python\n  - su devops -l -c \"./setup_python\"\n  - echo $PYENV_ROOT\n  - echo $PATH\n",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "hcloud_server",
      "name": "worker",
      "provider": "provider[\"registry.terraform.io/hetznercloud/hcloud\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "backup_window": "",
            "backups": false,
            "datacenter": "nbg1-dc3",
            "delete_protection": false,
            "firewall_ids": [],
            "id": "15427378",
            "image": "ubuntu-20.04",
            "ipv4_address": "49.12.238.231",
            "ipv6_address": "2a01:4f8:1c1c:57ac::1",
            "ipv6_network": "2a01:4f8:1c1c:57ac::/64",
            "iso": null,
            "keep_disk": false,
            "labels": {
              "type": "workers"
            },
            "location": "nbg1",
            "name": "worker-0",
            "network": [],
            "placement_group_id": null,
            "rebuild_protection": false,
            "rescue": null,
            "server_type": "cx11",
            "ssh_keys": [
              "4681739"
            ],
            "status": "running",
            "timeouts": null,
            "user_data": "20t64zu2pcWiHHTDiqIGQfsOiPk="
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.template_file.user_data",
            "hcloud_ssh_key.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "hcloud_ssh_key",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hetznercloud/hcloud\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "18:8a:5b:c8:46:e8:f6:12:66:6b:00:ff:46:6f:cb:f7",
            "id": "4681739",
            "labels": {},
            "name": "hetzner_key",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC7E75JwR78Zj0AGf0Hk9VqAs9e37+yOPNNssEdbHM3Uh15BvoHqDTfr8zRO3OsiWBeFmIR0KH8qdwraj1DGGsvnDAwDbi1mQH6V4e/9U269oBFJWKiLAxLUStyRGwK2EZOJvKjT6coic0Hck6I+LUp8QQRMZT8B4UJVk6N4nq0bg0v23dGUm6ULfrMHdJlLGde8Eb+ln/CWjOQXP/4G2UAOGi5PLlftqqJnqsGDS+MfCmNofifjq6NnF65i9JWkrfEVye3Ny3jwEEkBOaojtv9atjE+ExCsmH2BbJYAjEKNjamQwJkJ4iteGZEm88JCOkzRDr0ZEbgac4l7snbRTWt+2rz0UFnzYj00iAnrvQRh1OGgopspSZr7VJEvqdajO24PB7EuNVhG/y4mCpQ7ui1zFLF7X8s1/l6BXuCquiMOtldas5WzgAi1BiyOY3dj6iSEiR182asOsv/VRmmoQGIWQWU1qDQ7fvNCr+qKqSllslkJDb1MMgUumRiCKUI2VrdHt2tKuoHIKxR3zrHAhRe7gDCokPACFUcqOwL6wgFhtqtKJ1EzVl8yQBngnmaPDH/VGUHFhWU6i13hW76B1I/hhdI670l0YyJlsscxpBzWtHlgqTRzNX0l9LpWZhBXkKMluAH0JVy1fOfOs/zHJwqEkCmdDQyuuzN0z/B4PCCGQ== renanssilva@MacBook-Pro.local\n"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
